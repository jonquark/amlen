---
- name: Create the configmap
  k8s:
    state: present
    namespace: '{{ namespace }}'
    definition: "{{ lookup('template', '/'.join([samples_dir, cr_file])) | from_yaml }}"
  vars:
    cr_file: 'selfsigned.yaml'

- name: Create the configmap
  k8s:
    state: present
    namespace: '{{ namespace }}'
    definition: "{{ lookup('template', '/'.join([samples_dir, cr_file])) | from_yaml }}"
  vars:
    cr_file: 'config.yaml'

- name: Create the amlen.com/v1alpha1.Amlen
  k8s:
    state: present
    namespace: '{{ namespace }}'
    definition: "{{ lookup('template', '/'.join([samples_dir, cr_file])) | from_yaml }}"
    wait: yes
    wait_timeout: 600
    wait_condition:
      type: Successful
      status: "True"
  vars:
    cr_file: '_v1alpha1_amlen.yaml'

- name: run test
  helloWorld:
    suffix: ""
    servers: ""

- name: Add assertions here
  assert:
    that: false
    fail_msg: FIXME Add real assertions for your operator
